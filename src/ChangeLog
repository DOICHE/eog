1999-09-18  Federico Mena Quintero  <federico@redhat.com>

	* window.c (zoom_menu): Added a zoom factor menu.

	* ui-image.c (ui_image_construct): Set the step_increment for the
	scrolling adjustments.

	* ui-image.c (ui_image_get_zoom): New function to get the current
	zoom factor.
	(ui_image_zoom_fit): New function to zoom to fit the size of the
	image view.

	* window.c (window_construct): Create the toolbar.
	(view_menu): Added the View menu.
	(window_zoom_in): Zoom in by 5%.
	(window_zoom_out): Zoom out by 5%.
	(window_zoom_1): Zoom to 1:1 scale.
	(window_zoom_fit): Zoom to fit the window.
	(window_construct): Keep a pointer to the view menu and call
	set_mode().
	(set_menu_sensitivity): New function to set the sensitivity of
	menu items according to the window mode.
	(set_mode): Call set_menu_sensitivity().

	* tb-image.[ch]: New files with the definition of a toolbar for
	image windows.

	* commands.[ch]: New files with command callbacks for menus and
	toolbars.

	* main.c (main): Open the images specified in the command line.

	* window.c (window_open_image): Renamed from open_image() and made
	public.
	(window_open_image_dialog): Renamed from open_cmd() and made
	public.
	(window_close): Renamed from close_window() and made public.
	(file_menu): Use the callbacks in commands.h.

	* ui-image.c (ui_image_set_zoom): New function to set the zoom
	factor of an image view.

1999-09-17  Federico Mena Quintero  <federico@redhat.com>

	* window.c (new_window_cmd): Implemented File/New Window.
	(open_cmd): Oops.  Patch from Tom Gilbert to fix the cancel
	button.

	* ui-image.c (ui_image_set_image): Doh.  Unref the correct image
	(typo fix).

	* window.c (window_construct): Set the default size of windows to
	something resonable.
	(open_cmd): Keep the file selection dialog around so that it
	preserves its cwd.  Added a field to WindowPrivate to hold it.
	(open_ok_clicked): Just hide, don't destroy the dialog.
	(open_cancel_clicked): Likewise.
	(open_delete_event): Likewise.
	(window_destroy): Destroy the file selection dialog.

	* ui-image.c (ui_image_set_image): Set the canvas scroll region
	based on the image size.

	* zoom.[ch]: New files with utilitiy functions for computing zoom
	factors.

	* Makefile.am (eog_SOURCES): Added zoom.[ch] to the sources.

	* window.c (WindowPrivate): Added a bin field.  Now we put the
	contents in a simple bin because GnomeApp does not like its
	contents to be removed and added again.
	(window_construct): Create the bin.
	(set_mode): Put the real contents in the bin.

1999-09-17  Federico Mena Quintero  <federico@redhat.com>

	* main.c: Removed old test cruft.

	* window.c (confirm_save): Renamed from confirm_close().
	(open_image): Implemented File/Open.

	* ui-image.c: For now the image view is simply derived from
	GtkScrollFrame.  Implemented basic image setting functionality.

	* image-item.c (image_item_set_arg): Refcount the image.
	(image_item_destroy): Unref the image.

	* image.c (image_new): New function.
	(image_load): New function.  Do simplistic loading of images.
	(image_ref image_unref): Implemented refcounting of images.

	* Makefile.am (eog_SOURCES): Added image.c, ui-image.[ch] to the
	list of sources.

1999-09-16  Federico Mena Quintero  <federico@redhat.com>

	* window.c (exit_cmd): Change of plans.  Do not confirm for
	unsaved files using the Emacs way of doing it, but rather present
	a save/don't save/don't exit dialog.
	(confirm_close): Present a confirmation dialog.

1999-09-15  Federico Mena Quintero  <federico@redhat.com>

	* window.c (window_init): Add the window to the window list.
	(window_destroy): Remove the window from the window list.

	* window.c (window_delete): Confirm before closing.
	(close_cmd): Confirm before closing.
	(exit_cmd): Perform confirmation before exiting.

1999-09-15  Federico Mena Quintero  <federico@redhat.com>

	* window.c (about_cmd): Finished the about box.
	(window_construct): Added a constructor.  Create the menus.
	(window_new): New function.

	* Started the ChangeLog.

