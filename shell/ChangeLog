2002-02-03  Jens Finke <jens@triq.net>

	* eog-window.c (eog_window_construct): Set sane default window
	size, fixed automatic window resizing.
	(auto_size),
	(sensitize_zoom_items): Removed dead code.

2002-02-02  Jens Finke <jens@triq.net>

	* eog-preferences.c (add_property_control_page): Unref control
	object at end of function, code cleanup.
	(eog_preferences_construct): Unref prop_control object.

	* eog-window.c (eog_window_destroy): Use bonobo_object_unref to
	free control frame object.
	
2002-01-25  Jens Finke <jens@triq.net>

	Clean up the references held by EogWindow.
	
	* eog-preferences.c (eog_preferences_construct): Obtain ui
	container through standard bonobo_window interface.

	* eog-window.c (_EogWindowPrivate): Removed ui_container, ui and
	widget attributes from this struct. These are all accessable
	through the ctrl_frame object. Removed property_control attribute,
	this isn't neccessary here.
	(eog_window_destroy), (eog_window_init),
	(eog_window_has_contents), (eog_window_construct),
	(check_for_control_properties),
	(add_control_to_ui), (eog_window_open),
	(eog_window_get_property_control): Made these functions work
	without the removed global attributes.
	(eog_window_get_ui_container): Removed function, use standard
	bonobo_window access method instead.
	
2002-01-25  Jens Finke <jens@triq.net>

	* eog-window.c (verb_HelpAbout_cb): Updated authors list and
	copyright.
	(check_for_control_properties): Use new property bag API names.

2002-01-23  Jens Finke <jens@triq.net>

	* main.c (main): Applied path from Shingo Akagaki regarding
	bind_textdomain issues. This closes bug #68842.

2002-01-15  Michael Meeks  <michael@ximian.com>

	* eog-window.c (eog_window_construct): get rid of annoying
	auto-activation & concomitant flickering.
	(create_gtk_file_sel): use the (simpler) bonobo file
	selection API - checkout gnome-file-selector to make this
	really rock.
	(open_delete_event): kill.
	(open_cancel_clicked): kill.
	(open_ok_clicked): fold into
	(create_gtk_file_sel): here and fold into
	(eog_window_open_dialog):
	Remove all old crufty gnome file selector code.

2001-12-28  Jens Finke <jens@triq.net>

	* eog-shell-ui.xml: Renamed placeholder 'View' to
	'ViewPlaceholder'.

2001-12-27  Jens Finke <jens@triq.net>

	Ported EogWindow to the GObject based type system. Fixed warning
	and error messages when quitting the program directly after
	starting it.
	
	* eog-window.[ch] (verb_FileExit_cb): Free window list after
	traversing.
	(eog_window_get_type): Use GType type system.
	(eog_window_destroy): This function is now callable multiple times
	on the same object without crashing. Don't remove window from the
	window list here.
	(eog_window_finalize): New function for freeing the
	EogWindowPrivate data structure.
	(eog_window_class_init): Added callback for GObject finalize
	method. Set property_control = CORBA_OBJECT_NIL.
	(eog_window_delete): Simplified function.
	(eog_window_new): Use g_object_new to create new instance.
	(eog_window_construct): Don't connect to delete event. This is
	already done in eog_window_class_init.
	(eog_window_close): Remove window from window list.
	
2001-12-27  Jens Finke <jens@triq.net>

	* eog-window.c (eog_window_close): Use bonobo_main_quit instead of
	gtk_main_quit.
	(get_viewer_control): Rewrote this function. We don't make a
	general bonobo activation query here anymore, but specify the
	control through it's iid. This is because we want _our_ control
	here and because the query mechanism doesn't work correctly.

	* main.c (handle_cmdline_args): Use bonobo_main_quit instead of
	gtk_main_quit.
	
2001-12-27  Jens Finke <jens@triq.net>

	* Makefile.am (eog_LDADD): Removed $(INTLLIBS). Link the static
	eog library with -leog. This reduces the link time a lot.
	(eog_DEPENDENCIES): Added dependency to libeog.a.

2001-12-06  Jens Finke <jens@triq.net>

	* README: Removed it, it's totally outdated.

2001-12-06  Thomas Canty <tommydal@optushome.com.au>

	* Makefile.am: directory for bonobo xml files is gnome-2.0 not gnome

2001-11-05  Jens Finke <jens@triq.net>

	* eog-window.[ch] (verb_FileExit_cb),
	(eog_window_destroy),
	(eog_window_construct),
	(add_control_to_ui): More GNOME2 porting.
	(eog_window_get_ui_container): Return BonoboUIContainer rather
	than Bonobo_UIContainer.
	(eog_window_drag_data_received): Disabled the uri list extracting
	for now so that it at least compiles. I suppose the whole function
	needs more porting effort.

	* eog-preferences.c: s/Bonobo_UIContainer/BonoboUIContainer,
	needed due to the changes in eog_window_get_ui_container.
	
	The eog shell should now compile and run with GNOME2.

2001-11-05  Jens Finke <jens@triq.net>

	* Makefile.am: Removed idl related parts, it's in libeog.
	(INCLUDES): Use EOG_CFLAGS.
	(eog_LDADD): Use EOG_LIBS.

2001-11-28  Seth Nickell  <snickell@stanford.edu>

	* Makefile.am:
	* eog-preferences.c: (eog_preferences_finalize),
	(eog_preferences_class_init):
	* eog-preferences.h:
	* eog-window.c: (verb_HelpAbout_cb),
	(eog_window_drag_data_received), (eog_window_new),
	(eog_window_construct), (get_viewer_control),
	(get_collection_control), (get_collection_control_list):
	* eog-window.h:
	* main.c: (main):

	Initial port to GNOME2.
	
2001-08-29  Lutz Müller  <urc8@rz.uni-karlsruhe.de>

	* eog-window.c (add_control_to_ui): If we fail to create a widget,
	print a warning and return instead of continuing (and crashing).

2001-08-16  jacob berkman  <jacob@ximian.com>

	* eog-window.c: update file sel stuff to new api

2001-08-03  jacob berkman  <jacob@ximian.com>

	* eog-window.c (create_bonobo_file_sel): _set_usize() the dialog
	since bonobo size stuff happens after realize time
	(eog_window_open_dialog): set the window icon on the open dialog

2001-08-01  jacob berkman  <jacob@ximian.com>

	* eog-window.c (verb_FileExit_cb): destroy the windows rather than
	unreffing them

2001-07-31  jacob berkman  <jacob@ximian.com>

	* eog-window.c (eog_window_destroy): remove our listener, and
	release our event source
	(create_bonobo_file_sel): retain pointers to our listener id and
	event source

2001-07-19  jacob berkman  <jacob@ximian.com>

	* eog-window.c (create_bonobo_file_sel): set multi-select to the
	open_new_window gconf value
	(listener_cb): use the new api - string sequences

2001-07-18  jacob berkman  <jacob@ximian.com>

	* eog-window.c (create_bonobo_file_sel): set some of the new
	properties on the file sel

2001-07-17  Lutz Müller  <urc8@rz.uni-karlsruhe.de>

	* main.c: #include <libgnomeui/gnome-window-icon.h>

2001-07-13  jacob berkman  <jacob@ximian.com>

	* eog-window.c (eog_window_construct): don't set the default
	window icon, as bonobo does this now
	(create_bonobo_file_sel): delimit mime-types with : rather than ;
	(create_bonobo_file_sel): use the new moniker way of setting
	properties

	* main.c (main): set the default window icon

2001-07-11  Lutz Müller <urc8@rz.uni-karlsruhe.de>

        * Makefile.am: Remove EXTRA_[BONOBO,VFS]_[LIBS,CFLAGS], those are in
        EXTRA_GNOME_[LIBS,CFLAGS] now.
	* main.c: Remove glade_gnome_init - we don't need it.

2001-07-08 Lutz Müller <urc8@rz.uni-karlsruhe.de>

	* eog-shell-ui.xml: Print -> PrintOperations

2001-07-05 Lutz Müller <urc8@rz.uni-karlsruhe.de>

	* eog-window.c: Unref the old property control before getting a new one.

2001-07-03 Jens Finke <jens@gnome.org>

	Finally added a patch from 
	Juan Pablo Mendoza <pablo_juan@yahoo.com>:

	* eog-window.c (eog_window_drag_data_received): Add support for
	GDK_ACTION_ASK when draging files to EOG.
	(set_drag_dest): Also accept GDK_ACTION_ASK.

2001-06-29  Lutz Müller  <urc8@rz.uni-karlsruhe.de>

	* eog-window.c: Remove debugging message which got checked in.

2001-06-29  Lutz Müller  <urc8@rz.uni-karlsruhe.de>

	* e-dialog-widgets.[c,h]:
	* preferences.[c,h]: 
	* preferences-dialog.glade: Removed.
	* eog-window.c:
	* Makefile.am: Reflect above changes.
	* eog-preferences.c: Plug leaks (i.e. unref the property bag so that
	our eog-image-viewer can exit).

2001-06-27  Lutz Müller  <urc8@rz.uni-karlsruhe.de>

	* eog-window.c: Unref the property control on destroy. Now, the 
	eog-image-viewer shuts down after exiting eog. Don't ref the control
	widget - it'll get unref'd automatically on container_remove or exit.
	All other changes to improve readability (I needed them in order to 
	discover above problem).

2001-06-26  Lutz Müller  <urc8@rz.uni-karlsruhe.de>

	While searching why eog-image-viewer is still alive even after exiting
	eog...

	* eog-window.c: Fix two compile warnings (ENABLE_BONOBO_FILESEL), 
	use BONOBO_EX and bonobo_object_release_unref (makes code more
	readable)

2001-06-26  Lutz Müller  <urc8@rz.uni-karlsruhe.de>

	* .cvsignore: Ignore eog (formerly eog-shell)

2001-06-12  jacob berkman  <jacob@ximian.com>

	* eog-window.c (listener_cb): fix to use new event names, and
	handle when cancel is clicked

2001-06-07  jacob berkman  <jacob@ximian.com>

	* eog-window.c (listener_cb): callback for events emitted by the
	file selector
	(create_bonobo_file_sel): creates a bonobo file selector.  if the
	control creation fails (due to the file selector seg faulting or
	not being present) a normal gtk one is created
	(eog_window_open_dialog): if bonobo filesel is enabled, try to
	create one instead of the gtk one

	please note that this stuff leaks bonobo references probably

2001-06-05  Jens Finke <jens@gnome.org>

	To see the effect of these changes go into a directory with a lot
	of .png's and type: eog *.png.

	* eog-window.c (get_file_control): Renamed to get_viewer_control.
	(get_directory_control): Renamed to get_collection_control.
	(get_collection_control_list): New function, creates a collection
	with a list of multiple URIs.
	(add_control_to_ui): New helper function.
	(eog_window_open): Use add_control_to_ui helper function.
	(eog_window_open_list): New function, opens multiple URIs within a
	collection.

	* eog-window.h (eog_window_open_list): New function.

	* main.c (create_app): Free text uri.
	(create_app_list): Opens a new window with a list of URIs.
	(make_canonical_uri),
	(sort_startup_files),
	(open_in_single_windows),
	(user_wants_collection),
	(handle_cmdline_args): New helper functions.
	(main): Improved poptContext handling use handle_cmdline_args.
	
2001-05-31  Jens Finke <jens@gnome.org>

	* Makefile.am (INCLUDES), (eog_LDADD): Added vfs flags.

	* eog-window.c (get_file_control),
	(get_directory_control),
	(eog_window_open): We now use GnomeVFSURI for file handling here.

	* main.c (main): Added gnome_vfs_init () call.

2001-05-31  Jens Finke <jens@gnome.org>

	* Makefile.am: Renamed binary from eog-shell to eog. 

2001-05-29  Jens Finke <jens@gnome.org>

	* eog-window.c (eog_window_construct): Added a statusbar to the
	window bottom.
	(title_changed_cb): Renamed to property_changed_cb, which handles
	all changed control properties.
	(set_window_title): Renamed to check_for_control_properties. It
	checks for 'window/title' and 'window/status' which actually sets
	the window title and the status message and installs listeners to
	them.
	(eog_window_open): Make sure the path is an absolute path.
	
2001-05-21  Jens Finke <jens@gnome.org>

	* eog-window.c (title_changed_cb) New function to update the
	window title.
	(set_window_title): Listen to changes to the 'window_title'
	property of the embedded control.

2001-05-21  Jens Finke <jens@gnome.org>

	* eog-window.c (set_window_title): New function, which retrieves
	the window title from the control property 'bonobo:title'.
	(eog_window_open): Call set_window_title.

2001-05-18  Jens Finke <jens@gnome.org>

	* eog-window.c (eog_window_construct): Removed
	gtk_widget_set_usize function and replaced it with
	gtk_window_set_geometry_hints. Added window icon and allowed the
	window to shrink automatically.
	
2001-04-03  Michael Meeks  <michael@ximian.com>

	* main.c (main): bind text domain so we get translations.

2001-04-03  Michael Meeks  <michael@ximian.com>

	* eog-window.c (eog_window_construct): setup configuration.

2001-03-28  Jason Leach  <jasonleach@usa.net>

	* Makefile.am (INCLUDES): builddir != srcdir fix.

2001-03-28 Jens Finke <jens@gnome.org>

	* Makefile.am (EXTRA_DIST): Removed glade_messages in order to
	create buildable tarballs. 

2001-03-21  Lutz Müller  <urc8@rz.uni-karlsruhe.de>

	* main.c (main): init_with_popt_table in order to be able to load 
	given files. If we are given files (or directories), load each 
	into a separate window.
	(create_app): If we are given a parameter (== filename), load it.

2001-03-18  Lutz Müller  <urc8@rz.uni-karlsruhe.de>

	* eog-shell-ui.xml: Added placeholder for printing operations.

2001-03-12  Jens Finke <jens@gnome.org>

	* eog-window.c (eog_window_construct): Add BonoboControlFrame
	interface to object.
	(activate_uri_cb): New function.
	(get_directory_control): Use new GNOME:EOG:ImageCollection interface.
	(eog_window_open): Set BonoboControlFrame for controls. 

2001-03-09  Jens Finke <jens@gnome.org>

	* eog-shell-ui.xml: Added stock pixmap to 'FileNewWindow' command
	and accelerators for 'FileNewWindow', 'FileOpen' and
	'FileCloseWindow'.

2001-03-06  Jens Finke <jens@gnome.org>

	* eog-window-c (get_dir_images) Removed.
	(get_file_control): Use Bonobo_Storage Objects and new
	ImageCollection interface.

2001-03-01  Jens Finke <jens@gnome.org>

	* eog-shell-ui.xml: Renamed 'Create New Window' to 'New Window'
	and 'Close Window' to 'Close'. So it's more consistent with other
	applications.

2001-03-01  Lutz Müller <urc8@rz.uni-karlsruhe.de>

	* eog-shell-ui.xml: Added 'FileOperations' placeholder and put 
	'FileOpen' in it.

2001-02-27  Jens Finke <jens@gnome.org>

	Applied patch from Lutz Mueller <urc8@rz.uni-karlsruhe.de>:

	* eog-shell-ui.xml: Renamed placeholder to 'View' and moved it
	between 'File' and 'Settings' menu.

2001-02-20  Martin Baulig  <baulig@suse.de>

	* eog-preferences.[ch]: New files.

	* eog-window.h: Renamed IS_EOG_WINDOW -> EOG_IS_WINDOW,
	IS_EOG_WINDOW_CLASS -> EOG_IS_WINDOW_CLASS to make it consistent
	with how it's done everywhere else.

	* eog-window.c (eog_window_get_property_control): New function.
	(eog_window_get_ui_container): New function.
	(verb_Preferences_cb): Use the PropertyControl from eog-preferences.c.

2001-02-17  Martin Baulig  <baulig@suse.de>

	* main.c (main): Don't call CORBA_Object_release (orb).

	* eog-window.c (sensitive_zoom_items, auto_size): Commented
	out unused functions.

2001-02-15  Martin Baulig  <baulig@suse.de>

	* e-dialog-widgets.[ch], preferences.[ch],
	preferences-dialog.glade, util.[ch]: Replaced with a direct
	CVS copy which has the full history.
	
2001-02-15  Jens Finke <jens@gnome.org>

	* eog-window.[ch], eog-shell-ui.xml, main.c: Rewrote this
	completely.
	* e-dialog-widgets.[ch]: Verbatim copy from ../src.
	* preferences.[ch]: Verbatim copy from ../src.
	* preferences-dialog.glade[.h]: Verbatim copy from ../src.
	* util.[ch]: Verbatim copy from ../src.

2001-02-05  Martin Baulig  <baulig@suse.de>

	* eog-window.[ch]: New files.

	* eog-shell-ui.xml: New file.

	* main.c: New file.

